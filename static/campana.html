<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Estado de trabajo del territorio</title>

    <style>
        html, body, #map
        {
            height: 100%;
            padding: 0;
            margin: 0;
        }
    </style>
    <!--<link rel="stylesheet" href="../css/cartodb.css" />
    <script src="../js/cartodb.js"></script>-->
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15.9/themes/css/cartodb.css" />
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15.9/cartodb.js"></script>
    <link href='../css/PTSans.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!--<script src="../js/json3.min.js"></script>-->
</head>
<body>

      <div id="map">
       
           <script>
               var getUrlParameter = function getUrlParameter(sParam) {
                   var sPageURL = decodeURIComponent(window.location.search.substring(1)),
                       sURLVariables = sPageURL.split('&'),
                       sParameterName,
                       i;

                   for (i = 0; i < sURLVariables.length; i++) {
                       sParameterName = sURLVariables[i].split('=');

                       if (sParameterName[0] === sParam) {
                           return sParameterName[1] === undefined ? true : sParameterName[1];
                       }
                   }
               };
               var lat = getUrlParameter('lat');
               var lon = getUrlParameter('lon');
               var zoom = getUrlParameter('zoom');
               
            function main() {
                cartodb.createVis('map', 'https://abelbour.carto.com/api/v2/viz/7c66a316-7100-4465-86e0-f21be881c15f/viz.json', {
                    shareable: false,
                    title: false,
                    description: false,
                    search: false,
                    loaderControl: true,
                    //center_lat: -31.743952,
                    //center_lon: -60.487871,
                    center_lat: lat,
                    center_lon: lon,
                    zoom: zoom,
                    carto_logo: false,
                    mobile_layout: true,
                    scrollwheel: true,
                    //layer_selector: true
                })
        .done(function (vis, layers) {
            // layer 0 is the base layer, layer 1 is cartodb layer
            // setInteraction is disabled by default
            layers[1].setInteraction(true);
            var sublayer = layers[1].getSubLayer(2);


            //layers[1].on('featureOver', function(e, latlng, pos, data) {
            //  cartodb.log.log(e, latlng, pos, data);
            //});
            // you can get the native map to work with it
            var map = vis.getNativeMap();
            // now, perform any operations you need
            // map.setZoom(3);
            // map.panTo([50.5, 30.5]);
        })
        .error(function (err) {
            console.log(err);
        });
            }
            window.onload = main;
           </script>
    </div>
 
    
</body>
</html>
